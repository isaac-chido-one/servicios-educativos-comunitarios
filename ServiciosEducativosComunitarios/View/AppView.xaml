<Window x:Class="ServiciosEducativosComunitarios.View.AppView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ServiciosEducativosComunitarios.View"
        xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
        xmlns:conv="clr-namespace:ServiciosEducativosComunitarios.Converters"
        mc:Ignorable="d"
        Title="Servicios Educativos Comunitarios" Height="700"  Width="1300"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        Background="Transparent"
        AllowsTransparency="True">

    <Window.Resources>
        <conv:IdToNameConverter x:Key="IdToNameConverter"/>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Border CornerRadius="10" BorderThickness="1">

        <Border.BorderBrush>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1" >
                <GradientStop Color="{StaticResource winBorderColor1}" Offset="0"/>
                <GradientStop Color="{StaticResource winBorderColor2}" Offset="0.75"/>
                <GradientStop Color="{StaticResource winBorderColor3}" Offset="1"/>
            </LinearGradientBrush>
        </Border.BorderBrush>

        <Grid>
            <Grid.ColumnDefinitions>
                <!-- Navigation Menu -->
                <ColumnDefinition Width="250"/>
                <!-- Content section -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Navegation Menu -->
            <Border CornerRadius="10,0,0,10"
                    Grid.Column="0">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0.7">
                        <GradientStop Color="{StaticResource secondaryBackColor1}" Offset="0"/>
                        <GradientStop Color="{StaticResource secondaryBackColor2}" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>

                <StackPanel>
                    <!-- Logo -->
                    <StackPanel Orientation="Horizontal" Height="35" Margin="15,25,0,40">
                        <fa:IconImage Icon="UserCircle"  Foreground="{StaticResource color2}" />
                        <!-- <Image Source="/img/user.png" Height="32"/> -->
                        <TextBlock Text="Servicios Educativos" 
                                   Foreground="{StaticResource titleColor2}"
                                   FontSize="20"
                                   FontFamily="Montserrat"
                                   VerticalAlignment="Center" Margin="10,0,0,0" />
                    </StackPanel>
                    
                    <!-- Menu Buttons -->

                    <RadioButton Style="{StaticResource menuButton}"
                                 Name="RadioButtonHome"
                                 Checked="RadioButtonHome_Checked"
                                 Tag="{StaticResource color1}"
                    >
                        <StackPanel Orientation="Horizontal">
                            <fa:IconImage Icon="Home" Style="{StaticResource menuButtonIcon}"/>
                            <TextBlock Text="Home" Style="{StaticResource menuButtonText}"/>
                        </StackPanel>
                    </RadioButton>
                    <RadioButton Style="{StaticResource menuButton}"
                                 Name="RadioButtonLocalities"
                                 Checked="RadioButtonLocalities_Checked"
                                 GroupName="GroupPanels"
                                Tag="{StaticResource color3}">
                        <StackPanel Orientation="Horizontal">
                            <fa:IconImage Icon="Map" Style="{StaticResource menuButtonIcon}"/>
                            <TextBlock Text="Localidades INEGI" Style="{StaticResource menuButtonText}"/>
                        </StackPanel>
                    </RadioButton>
                    <RadioButton Style="{StaticResource menuButton}" Tag="{StaticResource color4}"
                                 Name="RadioButtonServices"
                                 Checked="RadioButtonServices_Checked"
                                 GroupName="GroupPanels"
                                 >
                        <StackPanel Orientation="Horizontal">
                            <fa:IconImage Icon="GraduationCap" Style="{StaticResource menuButtonIcon}"/>
                            <TextBlock Text="Servicios Educativos" Style="{StaticResource menuButtonText}"/>
                        </StackPanel>
                    </RadioButton>
                </StackPanel>
                
            </Border>
            
            <!-- Main Section -->
            <Border CornerRadius="0,10,10,0"
        Grid.Column="1">
                <Border.Background>
                    <LinearGradientBrush StartPoint="1,1" EndPoint="0,0">
                        <GradientStop Color="{StaticResource primaryBackColor1}" Offset="0"/>
                        <GradientStop Color="{StaticResource primaryBackColor2}" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid>
                    <Grid.RowDefinitions>
                        <!-- Control Bar -->
                        <RowDefinition Height="25"/>
                        <!--Header / Caption-->
                        <RowDefinition Height="35"/>
                        <!--Content section / Child viwes-->
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <!-- Control Bar -->
                    <StackPanel x:Name="pnlControlBar" Grid.Row="0"
                                Orientation="Horizontal"
                                FlowDirection="RightToLeft"
                                Background="Transparent"
                                Margin="0,0,5,0"
                                MouseLeftButtonDown="pnlControlBar_MouseLeftDown"
                                MouseEnter="pnlControlBar_MouseEnter">
                        <Button x:Name="btnClose"
                                Style="{StaticResource controlButton}"
                                Tag="{StaticResource color4}"
                                Click="btnClose_Click">
                            <fa:IconImage Icon="Xmark" Style="{StaticResource controlButtonIcon}"/>
                        </Button>

                        <Button x:Name="btnMaximize"
                                Style="{StaticResource controlButton}"
                                 Tag="{StaticResource color5}"
                                 Click="btnMaximize_Click">
                            <fa:IconImage Icon="Square" Style="{StaticResource controlButtonIcon}"/>
                        </Button>

                        <Button x:Name="btnMinimize"
                                Style="{StaticResource controlButton}"
                                Tag="{StaticResource color6}"
                                Click="btnMinimize_Click">
                            <fa:IconImage Icon="WindowMinimize" Style="{StaticResource controlButtonIcon}"/>
                        </Button>
                    </StackPanel>

                    <!--Header / Caption-->
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        
                        <!--Caption-->
                        <StackPanel Grid.Column="0" 
                                    Orientation="Horizontal"
                                    VerticalAlignment="Center">
                            
                            <fa:IconImage Icon="Home" Height="20"
                                          Width="20"
                                          Foreground="{StaticResource titleColor2}"
                                          Margin="35,0,10,0"/>
                            <TextBlock Text="Home" Foreground="{StaticResource titleColor2}"
                                       FontSize="16"
                                       FontFamily="Monterrat"
                                       FontWeight="Light"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <!-- User Options -->
                        <StackPanel Grid.Column="1"
                                    Orientation="Horizontal"
                                    FlowDirection="RightToLeft"
                                    VerticalAlignment="Center"
                                    Margin="0,0,10,0">
                            <Button Style="{StaticResource iconButton}"
                                    Tag="{StaticResource color1}">
                                <fa:IconImage Icon="AngleDown" 
                                              Height="12" Width="12"
                                              Style="{StaticResource iconButtonIcon}"/>
                            </Button>
                            <!--Falta agegar la funcionalidad para vincular el username-->
                            <TextBlock Text="User " Foreground="{StaticResource titleColor3}"
                                       FontFamily="Montserrat"
                                       FontSize="12"
                                       VerticalAlignment="Center"
                                       Padding="10,0,10,0"/>
                            <fa:IconImage Icon="User"
                                        Foreground="{StaticResource paintTextColor1}"
                                          Height="19"
                                          />

                            <Button Style="{StaticResource iconButton}"
                                    Tag="{StaticResource color3}">
                                <fa:IconImage Icon="Clock" Style="{StaticResource iconButtonIcon}"
                                              Margin="5,0,5,0"/>
                            </Button>

                            <Button Style="{StaticResource iconButton}"
                                    Tag="{StaticResource color4}">
                                <fa:IconImage Icon="Envelope" Style="{StaticResource iconButtonIcon}"
                                              Margin="5,0,5,0"/>
                            </Button>

                            <Button Style="{StaticResource iconButton}"
                                    Tag="{StaticResource color5}">
                                <fa:IconImage Icon="Bell" Style="{StaticResource iconButtonIcon}"
                                             Margin="5,0,5,0"/>
                            </Button>

                        </StackPanel>
                    </Grid>

                    <!--Content section / Child viwes-->
                    <ContentControl Content=""
                                    Grid.Row="2"
                                    Name="ContentControlMain"
                                    Margin="25"/>
                    
                    <Grid Grid.Row="2" Name="GridLocalities" Visibility="Hidden">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*"></RowDefinition>
                            <RowDefinition Height="11*"></RowDefinition>
                        </Grid.RowDefinitions>

                        <TextBlock 
                            Grid.Column="0" 
                            Grid.Row="0"
                            Foreground="Yellow"
                            FontSize="12"
                            FontWeight="Medium"
                            Margin="0"
                            TextWrapping="Wrap"
                            Background="Red"
                            Visibility="Hidden"
                            Name="LabelLocalityWarning"
                            Padding="10 5"
                            VerticalAlignment="Center"
                            TextAlignment="Center"
                        ></TextBlock>
                        <WrapPanel Grid.Column="1" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center">
                            <Button Margin="10 0" Padding="20 10" Name="ButtonNewLocality" Click="ButtonNewLocality_Click">Nuevo</Button>
                        </WrapPanel>

                        <DataGrid 
                            AutoGenerateColumns="False"
                            Grid.Column="0" 
                            Grid.Row="1" 
                            Grid.ColumnSpan="2"
                            Name="DataGridLocalities"
                            CanUserAddRows="False"
                            CanUserDeleteRows="True"
                            PreviewKeyDown="DataGridLocalities_PreviewKeyDown"
                            HorizontalAlignment="Stretch"
                            SelectionMode="Single"
                        >
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Clave" Binding="{Binding Code, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>

                                <DataGridTemplateColumn Header="Municipio">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ComboBox 
                                                VerticalAlignment="Center" 
                                                Margin="5,0,5,0"
                                                Name="ComboMunicipio"
                                                SelectedValuePath="Tag"
                                                SelectedValue="{Binding Municipio, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, TargetNullValue=0}"
                                            >
                                                <ComboBoxItem Tag="0" Content="Seleccionar..." IsSelected="True"></ComboBoxItem>
                                                <ComboBoxItem Tag="1" Content="Apozol"></ComboBoxItem>
                                                <ComboBoxItem Tag="2" Content="Apulco"></ComboBoxItem>
                                                <ComboBoxItem Tag="3" Content="Atolinga"></ComboBoxItem>
                                                <ComboBoxItem Tag="4" Content="Benito Juárez"></ComboBoxItem>
                                                <ComboBoxItem Tag="5" Content="Calera"></ComboBoxItem>
                                                <ComboBoxItem Tag="6" Content="Cañitas de Felipe Pescador"></ComboBoxItem>
                                                <ComboBoxItem Tag="7" Content="Concepción del Oro"></ComboBoxItem>
                                                <ComboBoxItem Tag="8" Content="Cuauhtémoc"></ComboBoxItem>
                                                <ComboBoxItem Tag="9" Content="Chalchihuites"></ComboBoxItem>
                                                <ComboBoxItem Tag="10" Content="Fresnillo"></ComboBoxItem>
                                                <ComboBoxItem Tag="11" Content="Trinidad García de la Cadena"></ComboBoxItem>
                                                <ComboBoxItem Tag="12" Content="Genaro Codina"></ComboBoxItem>
                                                <ComboBoxItem Tag="13" Content="General Enrique Estrada"></ComboBoxItem>
                                                <ComboBoxItem Tag="14" Content="General Francisco R. Murguía"></ComboBoxItem>
                                                <ComboBoxItem Tag="15" Content="El Plateado de Joaquín Amaro"></ComboBoxItem>
                                                <ComboBoxItem Tag="16" Content="General Pánfilo Natera"></ComboBoxItem>
                                                <ComboBoxItem Tag="17" Content="Guadalupe"></ComboBoxItem>
                                                <ComboBoxItem Tag="18" Content="Huanusco"></ComboBoxItem>
                                                <ComboBoxItem Tag="19" Content="Jalpa"></ComboBoxItem>
                                                <ComboBoxItem Tag="20" Content="Jerez"></ComboBoxItem>
                                                <ComboBoxItem Tag="21" Content="Jiménez del Teul"></ComboBoxItem>
                                                <ComboBoxItem Tag="22" Content="Juan Aldama"></ComboBoxItem>
                                                <ComboBoxItem Tag="23" Content="Juchipila"></ComboBoxItem>
                                                <ComboBoxItem Tag="24" Content="Loreto"></ComboBoxItem>
                                                <ComboBoxItem Tag="25" Content="Luis Moya"></ComboBoxItem>
                                                <ComboBoxItem Tag="26" Content="Mazapil"></ComboBoxItem>
                                                <ComboBoxItem Tag="27" Content="Melchor Ocampo"></ComboBoxItem>
                                                <ComboBoxItem Tag="28" Content="Mezquital del Oro"></ComboBoxItem>
                                                <ComboBoxItem Tag="29" Content="Miguel Auza"></ComboBoxItem>
                                                <ComboBoxItem Tag="30" Content="Momax"></ComboBoxItem>
                                                <ComboBoxItem Tag="31" Content="Monte Escobedo"></ComboBoxItem>
                                                <ComboBoxItem Tag="32" Content="Morelos"></ComboBoxItem>
                                                <ComboBoxItem Tag="33" Content="Moyahua de Estrada"></ComboBoxItem>
                                                <ComboBoxItem Tag="34" Content="Nochistlán de Mejía"></ComboBoxItem>
                                                <ComboBoxItem Tag="35" Content="Noria de Ángeles"></ComboBoxItem>
                                                <ComboBoxItem Tag="36" Content="Ojocaliente"></ComboBoxItem>
                                                <ComboBoxItem Tag="37" Content="Pánuco"></ComboBoxItem>
                                                <ComboBoxItem Tag="38" Content="Pinos"></ComboBoxItem>
                                                <ComboBoxItem Tag="39" Content="Río Grande"></ComboBoxItem>
                                                <ComboBoxItem Tag="40" Content="Sain Alto"></ComboBoxItem>
                                                <ComboBoxItem Tag="41" Content="El Salvador"></ComboBoxItem>
                                                <ComboBoxItem Tag="58" Content="Santa María de la Paz"></ComboBoxItem>
                                                <ComboBoxItem Tag="42" Content="Sombrerete"></ComboBoxItem>
                                                <ComboBoxItem Tag="43" Content="Susticacán"></ComboBoxItem>
                                                <ComboBoxItem Tag="44" Content="Tabasco"></ComboBoxItem>
                                                <ComboBoxItem Tag="45" Content="Tepechitlán"></ComboBoxItem>
                                                <ComboBoxItem Tag="46" Content="Tepetongo"></ComboBoxItem>
                                                <ComboBoxItem Tag="47" Content="Teúl de González Ortega"></ComboBoxItem>
                                                <ComboBoxItem Tag="48" Content="Tlaltenango de Sánchez Román"></ComboBoxItem>
                                                <ComboBoxItem Tag="57" Content="Trancoso"></ComboBoxItem>
                                                <ComboBoxItem Tag="49" Content="Valparaíso"></ComboBoxItem>
                                                <ComboBoxItem Tag="50" Content="Vetagrande"></ComboBoxItem>
                                                <ComboBoxItem Tag="51" Content="Villa de Cos"></ComboBoxItem>
                                                <ComboBoxItem Tag="52" Content="Villa García"></ComboBoxItem>
                                                <ComboBoxItem Tag="53" Content="Villa González Ortega"></ComboBoxItem>
                                                <ComboBoxItem Tag="54" Content="Villa Hidalgo"></ComboBoxItem>
                                                <ComboBoxItem Tag="55" Content="Villanueva"></ComboBoxItem>
                                                <ComboBoxItem Tag="56" Content="Zacatecas"></ComboBoxItem>
                                            </ComboBox>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTextColumn Header="Comunidad" Binding="{Binding Comunidad, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>

                                <DataGridTemplateColumn Header="Ámbito">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ComboBox 
                                                VerticalAlignment="Center" 
                                                Margin="0,0,3,3" 
                                                Name="ComboScope"
                                                SelectedValuePath="Tag"
                                                SelectedValue="{Binding Ambito, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, TargetNullValue=0}"
                                            >
                                                <ComboBoxItem Tag="0" Content="Seleccionar..."></ComboBoxItem>
                                                <ComboBoxItem Tag="1" Content="Rural"></ComboBoxItem>
                                                <ComboBoxItem Tag="2" Content="Urbano"></ComboBoxItem>
                                            </ComboBox>

                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTextColumn Header="Latitud" Binding="{Binding Latitud, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>

                                <DataGridTextColumn Header="Longitud" Binding="{Binding Longitud, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>

                                <DataGridTextColumn Header="Población" Binding="{Binding Poblacion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>

                                <DataGridTemplateColumn Header="" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button 
                                                Click="ButtonLocalityStore_Click"
                                                Margin="3" 
                                                Name="ButtonLocalityStore" 
                                                Tag="{Binding Id}" 
                                                ToolTip="Guardar" 
                                                Visibility="{Binding IsDirty, Converter={StaticResource BooleanToVisibilityConverter}}"
                                            >
                                                Guardar
                                            </Button>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Tag="{Binding Id}" ToolTip="Eliminar" Click="ButtonDeleteLocality_Click" Margin="3">Eliminar</Button>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>


                    <Grid Grid.Row="2" Name="GridServices" Visibility="Hidden">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*"></RowDefinition>
                            <RowDefinition Height="11*"></RowDefinition>
                        </Grid.RowDefinitions>

                        <TextBlock 
                            Grid.Column="0" 
                            Grid.Row="0"
                            Foreground="Yellow"
                            FontSize="12"
                            FontWeight="Medium"
                            Margin="0"
                            TextWrapping="Wrap"
                            Background="Red"
                            Visibility="Hidden"
                            Name="LabelServiceWarning"
                            Padding="10 5"
                            VerticalAlignment="Center"
                            TextAlignment="Center"
                        ></TextBlock>
                        <WrapPanel Grid.Column="1" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Center">
                            <Button Margin="10 0" Padding="20 10" Name="ButtonNewService" Click="ButtonNewService_Click">Nuevo</Button>
                        </WrapPanel>

                        <DataGrid 
                            AutoGenerateColumns="False"
                            Grid.Column="0" 
                            Grid.Row="1" 
                            HorizontalAlignment="Stretch"
                            Name="DataGridServices"
                            CanUserAddRows="False"
                            CanUserDeleteRows="True"
                            PreviewKeyDown="DataGridServices_PreviewKeyDown"
                            SelectionMode="Single"
                            Grid.ColumnSpan="2"
                        >
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Clave" Binding="{Binding Code}" Width="*"></DataGridTextColumn>
                                <DataGridTextColumn Header="Localidad" Binding="{Binding Locality}" Width="*"></DataGridTextColumn>
                                <DataGridTemplateColumn Header="Periodo" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Period, Converter={StaticResource IdToNameConverter}, ConverterParameter=Period}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Programa" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Program, Converter={StaticResource IdToNameConverter}, ConverterParameter=Program}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Estatus" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Status, Converter={StaticResource IdToNameConverter}, ConverterParameter=Status}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button 
                                                Click="ButtonServiceStore_Click"
                                                Margin="3" 
                                                Name="ButtonServiceStore" 
                                                Tag="{Binding Id}" 
                                                ToolTip="Guardar" 
                                                Visibility="{Binding IsDirty, Converter={StaticResource BooleanToVisibilityConverter}}"
                                            >Guardar</Button>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Tag="{Binding Id}" ToolTip="Eliminar" Click="ButtonDeleteService_Click" Margin="3">Eliminar</Button>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>

                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
